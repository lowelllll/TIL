# 토큰 (Token)
토큰 기반 인증을 알아보자.

#### Stateful 서버
클라이언트에게서 요청을 받을 때 마다 클라이언트의 상태를 계속해서 유지하고 이 정보를 서비스 제공해 이용함. ex) 세션을 유지하는 웹 서버

####  Stateless 서버
상태를 유지하지 않음. 상태 정보를 저장하지 않으면 서버는 클라이언트측에서 들어오는 요청만으로만 작업을 처리함.

## 토큰 기반 인증
### 토큰 기반 시스템의 작동 원리
토큰 기반 시스템은 stateless함.  
무상태, 상태 유지를 하지 않음.  
더이상 유저의 인증 정보를 서버나 세션에 담아두지 않음.

### 토큰 기반 시스템의 구현 방식
1. 유저가 아이디와 비번으로 로그인
2. 서버 측에서 해당 계정 정보 검증
3. 계정 정보가 정확하다면 서버 측에서 signed 토큰을 발급 (해당 토큰이 서버에서 정상적으로 발급된 토큰임을 증명하는 signature를 지니고 있음)
4. 클라이언트 측에서 전달 받은 토큰을 저장해두고 서버에 요청할 때 마다 해당 토큰을 함께 서버에 전달
4. 서버는 토큰을 검증하고 요청에 응답함.

웹 서버에서 토큰을 서버에 전달할 때 HTTP 요청의 헤더에 토큰 값을 포함시켜 전달함.

![토큰 인증 방식](https://velopert.com/wp-content/uploads/2016/12/token-diagram.png)
### 토큰의 장점
- 무상태이며 확장성 있음.   
    토큰은 클라이언트 사이드에 저장하기 때문에 완전히 stateless하며 서버를 확장하기에 적합한 환경을 제공.
- 보안성  
    클라이언트가 서버에 요청을 보낼 때 더이상 쿠키를 전달하지 않으므로 쿠키를 사용함으로 인해 발생하는 취약점이 사라짐.
- 확장성 (extendsibilty)  
    로그인 정보가 사용되는 분야를 확장하는 것, 토큰을 사용해 다른 서비스에서도 권한을 공유할 수 있음.  
    ex) oauth 

## refer
https://velopert.com/2350
