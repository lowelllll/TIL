# 애플리케이션층 (응용 계층)
<b>통신 서비스를 실현하는 것</b>
### 애플리케이션층 역할
1. 통신 서비스를 실현하는 것  
      컴퓨터끼리 주고받기를 사용자가 이용할 수 있는 '통신 서비스'라는 형태로 만드는 것
     서버와 클라이언트로 실현함.
2. 애플리케이션 프로토콜  
    통신 서비스에 대한 서버와 클라이언트의 주고 받기를 정하는 프로토콜
    HTTP,SMTP,POP,FTP 등

### 애플리케이션 헤더
애플리케이션층에서 추가되는 헤더, 요청과 응답에 관한 정보가 들어있음.   

## HTTP 프로토콜
> WWW 서비스를 지지하고 있는 프로토콜  

- 하나의 요청에 대해 하나의 응답을 반환하는 프로토콜 (무상태성 프로토콜)   
     실제로 페이지를 구성하고 있는 파일 수 만큼 작업을 반복함.
- 요청 패킷, 응답 패킷  
     요청(request)와 응답(response) 두 종류의 패킷을 사용하여 텍스트 형식으로 주고 받기를 수행함.(HTTP 헤더)

### 무상태 프로토콜
> 한 번으로 끝나는 프로토콜

HTTP 프로토콜은 '요청된 데이터를 반환하는 것'을 목적으로 만들어져 접속 상태를 유지한 채로 주고받기를 계속 할 수 없음.  
한번의 요청과 응답으로 통신은 완결, 과거에 수행한 통신과 관련을 맺는 경우는 없음

### 쿠키(Cookie)
HTTP로 한번 요청을 했던 사용자를 기억해야하는 서비스는 어떻게 해야할까?  
<b>쿠키</b>로 해결

- HTTP 프로토콜의 주고 받기에 관한 정보(Cookie)를 클라이언트측에 저장해 두어 다음 통신 때 그 정보(Cookie)를 서버에게 제시하면 서버는 사용자를 지정하고 이전 회에서 이어진 통신으로 취급할 수 있음.

쉽게 말해 <b>회원증</b> 기능을 함.

### CGI를 사용한 쿠키의 주고 받기
쿠키는 HTTP 프로토콜의 정규 장치가 아니므로 CGI 등 클라이언트로부터 요청에 맞게 웹 페이지를 작성하는 장치와 함께 사용함.

#### 일반 웹 페이지의 주고 받기   
서버가 응답 패킷을 준비함.

#### CGI를 사용해 주고 받기  
서버로부터 요청을 받아 CGI 프로그램이 응답 패킷을 준비함.  
쿠키를 사용하는 경우 헤더 부분에 쿠키와 '클라이언트에서 쿠키를 저장하기 위한 명령'을 써넣음.   
클라이언트는 쿠키를 저장함.  

#### 쿠키의 주고 받기
1. 클라이언트 : 요청
2. 서버 -> CGI 프로그램 : 응답 패킷의 응답 헤더에 쿠키의 저장을 의뢰하는 명령을 써 넣음 (Set-cookie)
3. 클라이언트 : 부여된 쿠키 저장

클라이언트가 다시 동일한 웹 사이트로 요청할 시  
1. 클라이언트 : 요청 패킷의 요청 헤더에 이전에 서버로부터 부여된 쿠키를 써 넣음
2. 서버 -> CGI 프로그램 : 쿠키를 보고 사용자를 지정하여 처리한 웹 페이지를 작성
3. 클라이언트 : 이전 통신을 근거로 웹 페이지 표시

쿠키는 유효기간이 있고 기간이 지난 쿠키는 클라이언트에 의해 자동적으로 삭제됨.

## 전자메일

### 명령과 응답
명령(command) : 클라이언트에서 서버로의 호출
응답(response) : 서버에서 클라이언트로의 호출 

명령과 응답은 헤더+데이터라는 형태를 취하지 않고 단독으로 트랜스포트층에 전달됨. (데이터가 없다고 보면 됨)

### SMTP
- - - 
> 메일을 수신인의 메일 서버까지 전송하는 프로토콜

SMPT 프로토콜 명령은 4문자 알파벳, 응답은 3자리 숫자로 나타냄.  
ex) 요청 HELO<mail.naver.com> (안녕) , 응답 250 (용건을 말하세요)

### POP 
- - - 
> 메일 서버로부터 자기 앞으로 온 전자메일을 받을 때 사용하는 프로토콜(version 3를 주로 사용 POP3)

POP 프로토콜 명령은 4문자 알파벳 , 응답은 '+OK','-ERR'로 나타냄.  
ex) 응답 +OK QPOP mail.naver.com (누구세요?) , 요청 USER lowell (전 lowell이에요)

- - - 
### 문자코드 
전자메일처럼 문자를 주고 받는 통신 서비스에서는 문자 그 자체가 아닌 문자 코드를 주고 받음. (ASCII)

<b>인코딩(Encoding)</b>
일반적으로 사람이 이해하는 언어를 컴퓨터가 이해하는 언어로 변환하는 것

<b>디코딩(Decoding)</b>
컴퓨터가 이해하는 언어를 다시 사람이 이해하는 언어로 변환하는 것

### MIME (Multipurpose Internet Mail Extension)
> 정해진 원칙에 따라 파일을 ASCII 문자열로 인코딩하고 어떻게 인코딩 했는지에 대한 정보를 첨부해 수신인에게 보냄으로 수신측이 올바른 방법으로 디코딩 할 수 있도록 하는 장치

<b>왜 쓸까?</b>

전자메일의 제약
1. 제목에는 한글을 사용할 수 없다.
     전자메일의 헤더로 사용할 수 있는 것은 문자코드 ASCII 뿐..
2. 텍스트 밖에 보낼 수 없다.
     그림,음악 데이터 X

<b>MIME는 이런 제약에 구애 받지 않고 제목에 한글을 사용하거나 첨부파일이라는 형태로 텍스트 이외의 데이터를 보낼 수 있음.</b>

# 트랜스포트층 (전송계층)
<b>통신을 실현하는 것 , 애플리케이션층과 네트워크층의 중개역할</b>

### 트랜스포트층의 역할
1. 데이터를 상대에게 전달하는 것  
    데이터를 전달할 때 문제가 발생한 경우 통신 서비스에 맞는 방법으로 그것을 처리함.
2. 상대 애플리케이션층에 있는 어떤 프로토콜에게 전달할 것인가?  
    TCP,UDP

### PORT
> 애플리케이션층에는 서비스의 수만큼 프로토콜이 존재하는데 그 중 목적한 프로토콜을 지정하기 위해 사용하는 장치  

각각의 개별 프로토콜로 가는 현관문

- 각 포트에는 포트 번호가 붙어있으며 통신을 수행할 때 포트 번호를 사용하여 보낼 곳(프로토콜)을 지정함.
- 프로토콜을 식별할 수 있고 다른 통신 서비스를 동시에 사용할 수 있음.
- 포트 번호는 0~65535번 까지 존재
- 0~1023번 까지는 통신 서비스마다 미리 예약되어있음.
- 그 외 포트는 사용자가 임의로 설정 가능하며 이때 통신하는 컴퓨터 간의 어떤 포트번호를 사용할지에 대한 인식이 통일되어있어야함.

## TCP (Transimission Control Protocol)
> '데이터를 안전하고 확실하게 전달할 것'을 목표로 둔 프로토콜. 데이터 전송의 정확성,신뢰성을 중시함.

### 커넥션형 통신
1:1 통신 , 데이터를 확실히 전달하기 위해 수신측과 1:1 통신을 함.

1. 수신측이 데이터를 받을 수 있는 상태인지 확인 후 통신 개시, 통신을 연결
2. 데이터를 정해진 크기로 분할하고 TCP 헤더에 붙여 순서대로 송신함.  
    트랜스포트층에서 취급하는 데이터의 단위 : 세그먼트 (segment)
3. 데이터를 다 보냈으면 통신을 종료함.

### 애플리케이션층에 전달
수신측은 전달받은 데이터를 원래의 형태로 다시 맞춘후 애플리케이션층에 전달함.
1. TCP 헤더의 정보를 보고 데이터를 순서대로 맞춤
2. TCP 헤더를 가지고 데이터를 다시 맞춤. (붙임)  
3. 애플리케이션층의 프로토콜에 전달. (port 번호를 보고 어떤 프로토콜에 전달할지 판단)



### 확실히 어떻게 전달하느냐?

<b>1. TCP는 확실한 주고받기를 위해 통신 상태에 대해 연락.</b>

#### 컨트롤 플래그(control flag)  
통신 상대에게 통신 상태를 전달하는 수단으로 TCP 헤더에 6비트로 구성.

<b>항목</b>  
- URG : 1이면 세그먼트가 긴급한 데이터를 갖고있다.
- ACK : 1이면 통신 확인에 대해 알았다고 응답하는 것. (확인 응답)
- PSH : 1이면 세그먼트를 바로 애플리케이션층에 전달함.
- RST : 1이면 통신을 강제적으로 해제.
- SYN : 1이면 통신 개시를 요청.
- FIN : 1이면 통신 종료.

<b>핸드셰이크(handshake)</b>  
통신 세계에서 일반적으로 상대와 서로 확인해 가며 주고 받는 것.

#### 데이터 량의 확인
실제로 통신을 시작하기 전 서로가 양쪽을 모두 다룰 수 있는 데이터 량을 확인함.
- 세그먼트 사이즈
- 윈도 사이즈  
     데이터를 한번에 받을 수 있는 양

수치는 작은 쪽으로 맞춰짐 

#### 통신 해제
TCP 헤더의 컨트롤 플래그를 사용하여 연락을 취함.

<b>2. 데이터가 무사히 전달 되었는지 서로 하나씩 확인.</b>

#### 주고 받기의 흐름
TCP 헤더에는 데이터의 순서를 나타내는 번호(시퀀스 번호)가 적혀있음.  
헤더를 확실히 받기 위해서 이 번호를 사용하여 주고받기를 수행함.

1. 송신측이 TCP 헤더에 시퀀스 번호를 쓰고 세그먼트를 보냄
2. 수신측이 시퀀스 번호를 보고 순서대로 전달되고 있는지 확인하고 전달된 세그먼트의 다음 번호를 송신측에게 알려줌.
3. 송신측이 무사히 전달됬다는 것을 확인하고 다음 세그먼트를 보냄
4. 수신측이 다음 세그먼트를 받고 시퀀스 번호를 보고 순서대로 나열함. 

#### 모아보내기
세그먼트는 하나씩 보내는 것 보다 몇 개씩 모아서 보내는 것이 효율적.  
통신을 시작할 때 정한 윈도 사이즈까지라면 확인 응답을 기다리지 않고 모아서 보낼 수 있음.

#### 윈도 사이즈 변경
윈도 사이즈는 통신 도중 변경 가능함.  
네트워크가 비어있을 때는 크게하고 혼잡할 때는 작게하는 등 상황에 맞게 조절 가능.

### 문제 발생시 처리 
TCP는 송수신중 문제가 발생하면 세그먼트를 재 전송함.

<b>확인 응답이 없을 경우 재전송.</b>  
일정  시간을 기다려도 확인 응답이 없을 시 이유를 불문하고 송신측은 세그먼트를 재전송함.

1. 세그먼트 지연 , 분실   
    송신 도중 세그먼트가 행방불명 되는 경우, 수신측은 확인 응답을 보낼 수 없음.
2. 확인 응답의 지연 및 분실  
    확인 응답 자체가 네트워크상에서 행방불명 되는 경우 (세그먼트가 중복되면 하나를 파기함)
3. 데이터 파손  
    송신 도중 데이터가 깨지는 경우 수신측은 그 데이터를 파기하고 확인 응답은 보내지 않음. 깨졌는지 아닌지는 헤더의 체크섬이라는 값을 사용하여 판단함.

일정 횟수 이상을 재전송해도 확인 응답이 오지 않는 경우 송신측이 강제로 통신을 해제함. (Control falg의 RST를 1)


### 수신측의 처리
1. 애플리케이션층에 전달.  
    - 수신측에서 TCP 헤더에 적힌 포트 번호를 보고 지정된 애플리케이션 프로토콜에 데이터를 전달함.
    - 데이터가 하나의 세그먼트로 묶여있을 경우 헤더를 제거하고 전달, 두개 이상으로 분할 되어있는 경우는 세그먼트를 조립한 후 전달함.

조립한 데이터를 지정된 애플리케이션 프로토콜에게 전달하면 TCP의 일은 끗

## UDP 
> 통신 속도를 중시한 프로토콜

### 비 커넥션형 통신
> 사전 의논하지 않고 일방적으로 데이터를 보냄.  

송신측 : 그냥보냄 막보냄 재전송안함.  
수신측 : 확인 응답? 안보냄 데이터 파기함ㅋ

### 동시에 보내기
UDP는 여러 상대에게 동시에 데이터를 보낼 수 있음.

<b>멀티캐스트(multicast)</b>  
복수의 특정인에게 보내는 것

<b>브로드 캐스트(broad-cast)</b>  
불특정 다수에게 보내는 것


### UDP가 하는일
- 데이터가 깨지지 않았는지 확인하고 깨졌다면 파기
- UDP 헤더를 제거하고 지정된 애플리케이션 프로토콜에 전달.

<b>실시간성이 중요시되는 통신이나 데이터가 작은 네트워크 관리의 통신 등에  사용됨</b>

# 네트워크층 
=인터넷층
> TCP/IP 통신의 핵심을 담당함. 여러개의 네트워크를 지나서 수신인의 컴퓨터에 데이터를 전달하는 역할  

## 네트워크층의 역할
네트워크층은 주된 프로토콜이 IP 하나밖에 없음.

1. 통신 방법의 차이를 흡수  
    네트워크층에는 통신 방법의 차이를 흡수하는 기능이 있음.  
    통신 방법이 다른 네트워크 상에 있는 컴퓨터끼리 주고 받기가 가능해짐.(케이블의 차이, 통신 형식의 차이)
2. 통신 상대를 지정  
    '누가 누구에게 전달할지' 라는 통신에 있어서 가장 중요한 정보를 다루고 있음  
    통신 상대를 정하기 위해 네트워크상에 존재하는 모든 기기에는 고유의 주소 같은게 할당되어있음.
3. 수신처까지의 경로 결정  
    수신처 컴퓨터까지의 경로는 하나만 있는 것이 아님.  
    경로가 여러개일 경우 적절한 루트를 사용하여 전달함.

## IP 프로토콜
> 네트워크층의 중심이 되는 프로토콜

<b>주요 기능</b>
### 데이터 링크층에 전달
송신측에서 트랜스포트층으로부터 데이터를 받아 IP 주소등을 기록한 IP 헤더를 붙여 데이터 링크측에 전달.  
 (데이터에 IP 헤더를 붙인 것을 IP 데이터 그램이라고 함.)
### 데이터 전송
IP 데이터 전송은 Best Effort 방식.  
<b>'노력은 하지만 보장은 하지 않는다'</b>

헤더가 깨지지 않았는지 확인하거나 수신처의 주소가 존재하는지 아닌지 정도의 판단 처리는 하지만 재전송 처리는 수행하지 않음.

### 최적의 경로로 보냄
수신처까지의 경로나 통신 상태를 보고 어떤 경로가 좋은지 판단하여 보냄.

### 트랜스포트층에 전달
수신측에서 IP 헤더가 쓰여진 IP 주소를 확인하고 자기 앞으로 온 것만 받음.  
트랜스포트층의 지정된 프로토콜에 데이터 전달함.

  
### IP 주소
> IP가 수신처를 판단하기 위해 사용하는 컴퓨터 주소  

- 32자리 비트열.
- 네트워크부와 호스트부의 구조  
     같은 네트워크 내라면 네트워크 부는 같음.  
     호스트부 : 각각의 컴퓨터를 나타내는 번호
- 8비트씩 피리어드로 구분하여 10진수로 나타냄. ex)192.168.15.10
- IP 주소의 중복을 피하기 위해 ICANN 기관이 전세계의 IP 주소를 관리함.

#### 서브넷 마스크
> 네트워크부와 호스트부의 경계를 나타내기 위해 사용하는 값  

IP 주소만으로 네트워크 부와 호스트 부의 경계를 알수 없음.  
서브넷 마스크(넷마스크) 값을 사용하여 경계를 나타냄. 
(네트워크부에 대응하는 비트를 1로 만듬)

```
IP 주소 192.168.15.10  
서브넷 마스크 255.255.0.0   
-> 192.168.15.10/16 (네트워크부의 비트수)
```

### 수신처까지 길안내
대부분 통신 서비스는 송신측에서 수신측 컴퓨터에 도달하기 까지 여러개의 네트워크를 경유함.

### 라우터 
= 네트워크층의 역할
> 네트워크 간을 연결하여 패킷이 수신처에 전달 될 때 까지 길안내를 해주는 기기

라우터의 네트워크층에서는 IP 헤더에 기록된 수신처의 IP주소를 보고 그 다음 전송처를 결정함.

#### 라우터에서 일어나는 일
1. 데이터 링크층에서 길 안내를 위해 패킷 회수
2. 네트워크층에서 수신처의  경로를 결정하거나 패킷의 크기를 조정
3. 다음 라우터로 보냄.

<b>Hop</b> : 통과한 라우터의 개수로 컴퓨터  사이의 거리를 나타낼 때 사용하는 단위.

### 수신처의 처리
- 트랜스포트층에 전달  
수신측의 네트워크 층에서는 IP 헤더를 보고 데이터가 깨졌는지 자기 앞으로 온건 지 확인 후 헤더의 정보를 보고 원래 형태로 맞춘 후 트랜스포트층의 지정된 프로토콜로 전달.


### ICMP (Internet Control Message Protocol)
> 신뢰성이 떨어지는 IP를 보조하기 위한 프로그램

<b> IP는 비 커넥션형!</b>  
데이터나 상대에게 전달됐는지 아닌지는 관여하지 않음

- ICMP는 IP 데이터그램의 통신 상태 등을 필요에 맞게 송신처에게 알려줌.(ICMP 메세지)
- ICMP 헤더와 ICMP 데이터에 IP 헤더를 붙인 형태로 송신측에게 보냄.

#### ICMP 헤더
1. 타입 메시지의 종류를 나타냄  
2. 코드 오류의 원인 등을 나타냄
3. 체크섬 (데이터가 무사한지 아닌지 확인)

주요 타입 
- 3 / 도달 불능 : IP 데이터그램을 수신처에 전달할 수 없음.
- 5 / 리다이렉트 : 현재 경로보다 최적의 경로를 발견
- 11 / 시간 초과 : 일정 개수 이상의 라우터를 경유한 IP 데이터그램을 파기함.
- 0,8 / 에코 : 8 - 이 메시지가 전달되면 답장주세요 , 0 - 메시지가 전달되었습니다.

접속 상태를 조사하는 명령인 'ping'이나 수신처까지의 경로를 조사하는 명령 

<b>Ping</b>
> 특정 컴퓨터가 네트워크 상에 존재하고 있는지 조사하고 존재하고 있다면 그 통신 상태등을 표시하는 명령

'tracert'는 ICMP 메시지를 사용해 결과를 반환함.


### IP 주소 설정
#### 고정 IP 주소 할당
각 컴퓨터에 고정 IP 주소를 할당하는 경우, 개별적으로 설정해야함.

#### 자동으로 할당
필요할 때만 자동으로 IP 주소를 할당하는 프로토콜 DHCP(Dynamic Host Configuration Protocol)을 사용함.

네트워크 접속함과 동시에 필요한 설정이 자동으로 수행됨.

- DHCP 클라이언트가 DHCP 서버에게 IP 주소를 요청, 일시적으로 할당받음
- DHCP 서버는 클라이언트의 요청에 대한 응답으로 IP 주소를 빌려주거나 서브넷 마스크의 설정 정보를 제공함.

### DHCP
<b>DHCP의 구조</b>
1. DHCP 클라이언트가 요청을 할때는 수신 IP를 255.255.255.255 로 만듬.(브로드캐스트 주소)
    - 동일한 LAN안의 모든 기기에 송신하기위한 특수한 IP 주소, 이 요청에 대해선 DHCP 서버만 응답함.
2.  IP 주소를 부여받은 DHCP 클라이언트는 다시  255.255.255.255 IP 주소 앞으로 확인 메시지를 보냄. 
    - 이에 대해 DHCP 서버가 응답하면 주고받기 완료'

### 네트워크의 세분화 
### 서브넷
회사 내부나 큰 네트워크를 관리할 때 편리한 장치

127.15.4.0 ~ 127.15.4.255/24 라는 ip 주소를 사용하는 네트워크는 127.15.4 라는 네트워크 주소를 가지고 있는 하나의 네트워크에 254대의 기기를 접속할 수 있음. (0,255는 고유 주소로 사용 불가)

<b>서브넷 장치를 사용하면?</b>  
- 대규모 네트워크를 가상으로 작은 네트워크들로 만들어 네트워크 모음으로 처리할 수 있게함.  
- 각 네트워크는 라우터로 연결되어있음.

#### 서브넷 만들기
서브넷 마스크를 사용하여 가상으로 네트워크부를 늘림.

- 127.15.4.0~127.15.4.255/24 => 254개의 기기를 접속할 수있는 네트워크 
- 127.15.4.0~127.15.4.255/28 -> 늘리고 싶은 비트수를 더함, 네트워크부가 4비트 증가함 그 부분은 관리자가 자유롭게 사용 가능 => 14개의 기기를 접속할 수 있는 네트워크를 14개 만들 수 있음 (0,14 제외)

서브넷은 네트워크 내에서만 정한 규칙으로 밖에서 보면 하나의 큰 네트워크로 보임

회사 등 네트워크의 규모가 큰 경우 서브넷을 사용해 부서나 층 단위로 세분화하면 관리하기 쉬움

### LAN 내에서의 주소
#### 사설 IP 주소
회사 내나 가정 내 등 한정된 네트워크 안에서만 유효한 IP 주소 
사설 주소는 네트워크가 다르면 중복되어도 문제가 없음.

#### 사설 주소, 공인 주소
사설 주소 그대로는 인터넷에 접속할 수 없음. -> 사설주소를 공인 주소로 변환하는 장치를 사용해야함. (대부분의 라우터에는 이런 기능이 들어가있음)

- NAT (Network Address Translation)  
사설 주소와 공인 주소를 일 대 일로 대응시켜 변환하는 장치.  
확보하고 있는 공인 주소의 개수 이내라면 여러개의 컴퓨터를 동시에 인터넷에 접속 시킬 수 있음.
- NAPT (Network Address Port Traslation)  
= <b>ip 메스커레이드</b>  
하나의 공인 주소를 사용하여 여러 대의 컴퓨터를 동시에 접속할 수 있는 장치.  
포트 번호에 의해 각각의 컴퓨터를 식별하므로 같은 공인 주소를 동시에 사용 가능함.

```
192.168.10.15   
192.169.10.16 

공인주소 222.232.100.125   

222.232.100.125:4000
222.232.100.125:4001
```

## DNS
> 도메인 서비스, IP 주소와 도메인 명을 처리하는 서비스

애플리케이션 프로토콜인 DNS를 사용하여 주고 받음.

### 지역 네임 서버 (지역 DNS 서버)
DNS 서비스를 제공하고 IP 주소와 도메인의 대응표를 관리함.
- 클라이언트와 직접 주고 받으며 여러 개의 네임서버가 연계하여 서비스를 제공함.

클라이언트 : www.google.com ip 주소 알려주세용  
지역 네임 서버 : 192.168.xxx.xxx 여기용

#### IP 주소를 찾는 법
여러 개의 네임 서버를 따라 최종적으로 목적하는 도메인을 관리하고 있는 네임 서버까지 도달하여 IP 주소를 조사함.  
(상위의 네임 서버에는 하나 아래층에 있는 네임 서버의 IP 주소가 등록되어있음.)

# 데이터 링크층 , 물리층 
### 네트워크
> 사용하는 통신 매체(통신을 하기위해 사용되는 네트워크 장비, 하드웨어)나 연결 방법에 따라 다양한 종류가 있고 그 종류에 따라 통신 방법이 달라짐.

- 데이터 링크층 : 네트워크층과 물리층의 중개자
- 물리층 : 데이터 링크층과 하나가 되어 작동하는 층
## 데이터 링크층의 역할
### 데이터 링크
> 기기끼리 연결하는데 몇가지의 방법이 있으며 동일한 규칙(방법)을 바탕으로 연결되어있는 한 덩어리의 기기

- 네트워크간의 차이를 흡수  
    데이터 링크간의 차이를 흡수하며 네트워크층보다 위에 있는 층이 그 차이를 의식하지 않고 작동할 수 있도록 하는 것.  
    인터넷은 데이터 링크의 모음, 데이터 링크층의 프로토콜은 각각의 데이터 링크 내에서 작동함.
- 네트워크층과 물리층의 중개자  
- 데이터 링크층의 프로토콜
     데이터 링크 안에서 데이터를 어떻게 주고 받을지 결정함.
     데이터 링크 내에서 기기를 식별할 필요가 있을 때 MAC 주소를 사용함.

데이터 링크층에서는 데이터에 헤더를 붙은 것을 프레임(frame)이라고 함.

## 물리층의 역할
#### 통신매체
신호를 전달하는 것을 총칭한 것
> 물리층은 통신 그 자체를 가르킴.

- 데이터 링크안에서 신호가 흐르고 있는 부분
- 비트열과 신호의 변환이 일어남. 방법은 기기가 갖고있는 성질에 의존하기 때문에 정해진 프로토콜이 없음.
    1. 비트열을 통신 매체에 맞춘 신호로 변환
    2. 케이블 등의 통신 매체 속으로 신호를 전달해 감
    3. 전달된 신호를 비트열로 변환하여 데이터 링크층에 전달함.

## 데이터 링크를 구성하는 요소
### 노드
> 데이터 링크 상에 있는 기기, 컴퓨터 라우터

### 통신 매체
> 노드 간에 연결하는 케이블 등  

케이블의 양 끝에는 노드에 접속하기 위한 단자가 붙어있음.

- 금속선 케이블(동축케이블)
     전압의 변화로 신호를 전달.
     파형이 일그러지기 쉬우므로 장거리 전송에는 신호를 증폭 및 수정하는 장치 리피터가 필요함.
- 광섬유 케이블(유리)
     빛의 점멸로 신호를 전달 (명 암 명 암 암 명)
     원거리 전송 가능, 주변 전파의 영향을 받지 않음.
- 기타 무선 
     케이블을 사용하지 않고 전파나 적외선으로 신호를 전달.
     노드간의 거리나 장애물, 주변 전파의 영향에 따라 통신할 수 없는 경우도 있음
### 노드와 통신 매체를 연결하는 기기
> 비트열과 신호를 변환하는 것  
네트워크 인터페이스 카드(NIC)나 모뎀 등

## 네트워크 출입
1. 비트열을 신호로 변환하기
    - 컴퓨터에서 네트워크로 가는 현관문이 되는 것은 NIC
    1. 송신측 -  비트열을 신호로 변환해 송신
    2. 신호가 케이블 속을 이동
    3. 수신측 - 신호를 비트열로 변환해 수신
2. MAC 주소
    > NIC에 할당되어 있는 고유한 번호
    - 데이터 링크층에서는 이 번호를 사용하여 기기를 정함.
    - 네트워크를 지날 땐 IP 주소, 데이터 링크층 안으로 들어간 후에는 MAC 주소가 사용됨.
3. MAC 주소를 사용한 수신인 확인
    - IP 주소와 동일
    - 송신측에서 보낸 요청의 수신인 MAC 주소가 같은 NIC가 수신함. 여기서 네트워크층은 헤더의 IP 주소를 보고 자기 앞으로 온 것만 받음.

### NIC (네트워크 인터페이스 카드)
>  네트워크에 접속하기 위해 컴퓨터 내에 설치되는 확장 카드.    

- 모든 데이터는 NIC 기기를 통해 컴퓨터를 출입함.  
- NIC에는 고유의 번호가 할당되어 있음.


## refer
[TCP/IP가 보이는 그림책](http://www.cyber.co.kr/shop/goods/goods_view.php?goodsno=5993&category=020040)
