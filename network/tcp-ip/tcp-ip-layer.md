# 애플리케이션층
통신 서비스를 실현하는 것
### 애플리케이션층 역할
1. 통신 서비스를 실현하는 것  
      컴퓨터끼리 주고받기를 사용자가 이용할 수 있는 '통신 서비스'라는 형태로 만드는 것
     서버와 클라이언트로 실현함.
2. 애플리케이션 프로토콜  
    통신 서비스에 대한 서버와 클라이언트의 주고 받기를 정하는 프로토콜
    HTTP,SMTP,POP,FTP 등

### 애플리케이션 헤더
애플리케이션층에서 추가되는 헤더, 요청과 응답에 관한 정보가 들어있음.   

## HTTP 프로토콜
> WWW 서비스를 지지하고 있는 프로토콜  

- 하나의 요청에 대해 하나의 응답을 반환하는 프로토콜 (무상태성 프로토콜)   
     실제로 페이지를 구성하고 있는 파일 수 만큼 작업을 반복함.
- 요청 패킷, 응답 패킷  
     요청(request)와 응답(response) 두 종류의 패킷을 사용하여 텍스트 형식으로 주고 받기를 수행함.(HTTP 헤더)

### 무상태 프로토콜
> 한 번으로 끝나는 프로토콜

HTTP 프로토콜은 '요청된 데이터를 반환하는 것'을 목적으로 만들어져 접속 상태를 유지한 채로 주고받기를 계속 할 수 없음.  
한번의 요청과 응답으로 통신은 완결, 과거에 수행한 통신과 관련을 맺는 경우는 없음

### 쿠키(Cookie)
HTTP로 한번 요청을 했던 사용자를 기억해야하는 서비스는 어떻게 해야할까?  
<b>쿠키</b>로 해결

- HTTP 프로토콜의 주고 받기에 관한 정보(Cookie)를 클라이언트측에 저장해 두어 다음 통신 때 그 정보(Cookie)를 서버에게 제시하면 서버는 사용자를 지정하고 이전 회에서 이어진 통신으로 취급할 수 있음.

쉽게 말해 <b>회원증</b> 기능을 함.

### CGI를 사용한 쿠키의 주고 받기
쿠키는 HTTP 프로토콜의 정규 장치가 아니므로 CGI 등 클라이언트로부터 요청에 맞게 웹 페이지를 작성하는 장치와 함께 사용함.

#### 일반 웹 페이지의 주고 받기   
서버가 응답 패킷을 준비함.

#### CGI를 사용해 주고 받기  
서버로부터 요청을 받아 CGI 프로그램이 응답 패킷을 준비함.  
쿠키를 사용하는 경우 헤더 부분에 쿠키와 '클라이언트에서 쿠키를 저장하기 위한 명령'을 써넣음.   
클라이언트는 쿠키를 저장함.  

#### 쿠키의 주고 받기
1. 클라이언트 : 요청
2. 서버 -> CGI 프로그램 : 응답 패킷의 응답 헤더에 쿠키의 저장을 의뢰하는 명령을 써 넣음 (Set-cookie)
3. 클라이언트 : 부여된 쿠키 저장

클라이언트가 다시 동일한 웹 사이트로 요청할 시  
1. 클라이언트 : 요청 패킷의 요청 헤더에 이전에 서버로부터 부여된 쿠키를 써 넣음
2. 서버 -> CGI 프로그램 : 쿠키를 보고 사용자를 지정하여 처리한 웹 페이지를 작성
3. 클라이언트 : 이전 통신을 근거로 웹 페이지 표시

쿠키는 유효기간이 있고 기간이 지난 쿠키는 클라이언트에 의해 자동적으로 삭제됨.

## 전자메일

### 명령과 응답
명령(command) : 클라이언트에서 서버로의 호출
응답(response) : 서버에서 클라이언트로의 호출 

명령과 응답은 헤더+데이터라는 형태를 취하지 않고 단독으로 트랜스포트층에 전달됨. (데이터가 없다고 보면 됨)

### SMTP
- - - 
> 메일을 수신인의 메일 서버까지 전송하는 프로토콜

SMPT 프로토콜 명령은 4문자 알파벳, 응답은 3자리 숫자로 나타냄.  
ex) 요청 HELO<mail.naver.com> (안녕) , 응답 250 (용건을 말하세요)

### POP 
- - - 
> 메일 서버로부터 자기 앞으로 온 전자메일을 받을 때 사용하는 프로토콜(version 3를 주로 사용 POP3)

POP 프로토콜 명령은 4문자 알파벳 , 응답은 '+OK','-ERR'로 나타냄.  
ex) 응답 +OK QPOP mail.naver.com (누구세요?) , 요청 USER lowell (전 lowell이에요)

- - - 
### 문자코드 
전자메일처럼 문자를 주고 받는 통신 서비스에서는 문자 그 자체가 아닌 문자 코드를 주고 받음. (ASCII)

<b>인코딩(Encoding)</b>
일반적으로 사람이 이해하는 언어를 컴퓨터가 이해하는 언어로 변환하는 것

<b>디코딩(Decoding)</b>
컴퓨터가 이해하는 언어를 다시 사람이 이해하는 언어로 변환하는 것

### MIME (Multipurpose Internet Mail Extension)
> 정해진 원칙에 따라 파일을 ASCII 문자열로 인코딩하고 어떻게 인코딩 했는지에 대한 정보를 첨부해 수신인에게 보냄으로 수신측이 올바른 방법으로 디코딩 할 수 있도록 하는 장치

<b>왜 쓸까?</b>

전자메일의 제약
1. 제목에는 한글을 사용할 수 없다.
     전자메일의 헤더로 사용할 수 있는 것은 문자코드 ASCII 뿐..
2. 텍스트 밖에 보낼 수 없다.
     그림,음악 데이터 X

<b>MIME는 이런 제약에 구애 받지 않고 제목에 한글을 사용하거나 첨부파일이라는 형태로 텍스트 이외의 데이터를 보낼 수 있음.</b>

## refer
[TCP/IP가 보이는 그림책](http://www.cyber.co.kr/shop/goods/goods_view.php?goodsno=5993&category=020040)
